<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Where are the Alices? - A Psychological Horror Game</title>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&family=Crimson+Text:wght@400;600&family=Special+Elite&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        :root {
            /* Fuentes */
            --font-heading: 'Playfair Display', serif;
            --font-body: 'Crimson Text', serif;
            --font-accent: 'Special Elite', cursive;
            
            /* Colores principales */
            --primary-color: #000000;
            --secondary-color: #1A1A1A;
            --accent-color: #2D2D2D;
            --accent-red: #8B0000;
            --accent-gold: #D4AF37;
            
            /* Fondos */
            --background-dark: #0A0A0A;
            --background-light: #1A1A1A;
            
            /* Textos */
            --text-primary: #CCCCCC;
            --text-secondary: #999999;
            --border-color: #333333;
            --shadow-color: rgba(0, 0, 0, 0.7);

            --gold: #FFD700;
            --dark-gold: #B8860B;
            --black: #000000;
            --dark-red: #1a0000;
            
            /* Sombras y efectos */
            --gold-glow: 0 0 10px rgba(255, 215, 0, 0.3);
            --text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
        }

        body {
            background-color: var(--black);
            color: var(--gold);
            font-family: 'Special Elite', monospace;
            margin: 0;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            background-image: 
                radial-gradient(circle at 50% 50%, var(--dark-red) 0%, var(--black) 100%);
        }

        .menu {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            background: rgba(0, 0, 0, 0.9);
            padding: 10px 0;
            z-index: 100;
            text-align: center;
        }

        .menu-items {
            display: flex;
            justify-content: center;
            gap: 30px;
            max-width: 800px;
            margin: 0 auto;
            padding: 0 20px;
        }

        .menu-items a {
            color: var(--main-white);
            text-decoration: none;
            font-size: 16px;
            text-transform: uppercase;
            letter-spacing: 1px;
            transition: color 0.3s;
            position: relative;
        }

        .menu-items a:hover {
            color: var(--accent-red);
        }

        .menu-items a::after {
            content: '*';
            position: absolute;
            right: -12px;
            opacity: 0;
            transition: opacity 0.3s;
        }

        .menu-items a:hover::after {
            opacity: 1;
        }

        .main-content {
            padding-top: 80px;
            text-align: center;
        }

        .game-logo {
            max-width: 600px;
            width: 90%;
            margin: 4rem auto 2rem;
            filter: drop-shadow(0 0 15px rgba(255, 215, 0, 0.2));
        }

        .platforms-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 2rem;
            max-width: 1200px;
            margin: 2rem auto;
            padding: 2rem;
        }

        .platform-section {
            background-color: rgba(139, 0, 0, 0.1);
            border: 1px solid var(--gold);
            padding: 2rem;
            text-align: center;
            transition: all 0.3s ease;
        }

        .platform-section:hover {
            box-shadow: var(--gold-glow);
            transform: translateY(-5px);
        }

        .platform-section h3 {
            color: var(--gold);
            font-size: 1.2rem;
            margin-bottom: 1.5rem;
            text-transform: uppercase;
            letter-spacing: 2px;
            text-shadow: var(--text-shadow);
        }

        .platform-buttons {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .platform-btn {
            display: block;
            width: 100%;
            padding: 0.8rem;
            margin: 0.5rem 0;
            background-color: transparent;
            border: 1px solid var(--gold);
            color: var(--gold);
            text-transform: uppercase;
            letter-spacing: 1px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'Special Elite', monospace;
            position: relative;
            overflow: hidden;
        }

        .platform-btn:hover {
            background-color: var(--gold);
            color: var(--black);
            box-shadow: var(--gold-glow);
        }

        .platform-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(
                120deg,
                transparent,
                rgba(255, 215, 0, 0.2),
                transparent
            );
            transition: all 0.5s;
        }

        .platform-btn:hover::before {
            left: 100%;
        }

        .news-section {
            max-width: 800px;
            margin: 40px auto;
            padding: 20px;
            border: 2px solid var(--gold);
            background-color: rgba(139, 0, 0, 0.1);
            position: relative;
        }

        .cta-container {
            text-align: center;
            padding: 2rem;
        }

        .cta-container h2 {
            color: var(--gold);
            font-size: 2.5rem;
            margin-bottom: 1.5rem;
            text-transform: uppercase;
            letter-spacing: 3px;
            text-shadow: var(--text-shadow);
            animation: textShadowPulse 4s infinite;
        }

        .cta-text {
            color: var(--gold);
            font-size: 1.2rem;
            line-height: 1.8;
            margin-bottom: 2rem;
            opacity: 0.9;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
        }

        .cta-btn {
            background: transparent;
            border: 2px solid var(--gold);
            color: var(--gold);
            padding: 1rem 3rem;
            font-size: 1.2rem;
            text-transform: uppercase;
            letter-spacing: 2px;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            font-family: var(--font-accent);
        }

        .cta-btn:hover {
            background: var(--gold);
            color: var(--black);
            transform: translateY(-2px);
            box-shadow: 0 0 20px rgba(255, 215, 0, 0.4);
        }

        .news-item {
            margin-bottom: 30px;
            text-align: left;
            display: flex;
            gap: 20px;
            align-items: center;
        }

        .news-image {
            width: 100px;
            height: 100px;
            object-fit: cover;
        }

        @media (max-width: 768px) {
            .menu-items {
                flex-direction: column;
                gap: 15px;
            }

            .platforms-grid {
                grid-template-columns: 1fr;
                padding: 1rem;
            }

            .platform-section {
                margin-bottom: 1rem;
            }

            .news-item {
                flex-direction: column;
                text-align: center;
            }
        }

        .footer {
            text-align: center;
            padding: 20px;
            font-size: 12px;
            opacity: 0.7;
        }

        /* Efecto de glitch similar a Undertale */
        @keyframes glitch {
            0% { transform: translate(0) }
            20% { transform: translate(-2px, 2px) }
            40% { transform: translate(-2px, -2px) }
            60% { transform: translate(2px, 2px) }
            80% { transform: translate(2px, -2px) }
            100% { transform: translate(0) }
        }

        .glitch-effect:hover {
            animation: glitch 0.3s linear infinite;
        }

        /* Estilos para el menú hamburguesa */
        .nav-toggle {
            display: none;
            background: transparent;
            border: none;
            color: var(--main-white);
            padding: 10px;
            cursor: pointer;
            position: fixed;
            top: 15px;
            right: 15px;
            z-index: 1000;
        }

        .nav-toggle:focus {
            outline: 2px solid var(--accent-red);
            outline-offset: 2px;
        }

        .nav-toggle svg {
            width: 24px;
            height: 24px;
            fill: currentColor;
        }

        /* Estilos para el menú móvil */
        @media (max-width: 768px) {
            .nav-toggle {
                display: block;
            }

            .menu-items {
                position: fixed;
                top: 0;
                right: -100%;
                height: 100vh;
                width: 250px;
                background: rgba(0, 0, 0, 0.95);
                flex-direction: column;
                padding: 80px 20px 20px;
                transition: right 0.3s ease;
            }

            .menu-items.active {
                right: 0;
            }

            .menu-items a {
                font-size: 20px;
                padding: 15px 0;
                width: 100%;
                text-align: left;
            }

            /* Overlay para cuando el menú está abierto */
            .menu-overlay {
                display: none;
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0, 0, 0, 0.5);
                z-index: 90;
            }

            .menu-overlay.active {
                display: block;
            }
        }

        /* Animación para el botón hamburguesa */
        .hamburger-line {
            display: block;
            width: 24px;
            height: 2px;
            margin: 5px 0;
            background: var(--main-white);
            transition: transform 0.3s ease;
        }

        .nav-toggle[aria-expanded="true"] .hamburger-line:nth-child(1) {
            transform: translateY(7px) rotate(45deg);
        }

        .nav-toggle[aria-expanded="true"] .hamburger-line:nth-child(2) {
            opacity: 0;
        }

        .nav-toggle[aria-expanded="true"] .hamburger-line:nth-child(3) {
            transform: translateY(-7px) rotate(-45deg);
        }

        /* Prevenir scroll cuando el menú está abierto */
        body.menu-open {
            overflow: hidden;
        }

        /* Estilo para secciones de contenido */
        .content-section {
            position: relative;
            padding: 2rem;
            margin-bottom: 2rem;
            border-radius: 0;
            overflow: hidden;
            background-color: rgba(26, 26, 26, 0.95);
            box-shadow: 0 4px 6px var(--shadow-color);
            border: 1px solid var(--accent-gold);
        }

        /* Efecto de patrón de líneas */
        .content-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: repeating-linear-gradient(
                0deg,
                transparent,
                transparent 2px,
                rgba(212, 175, 55, 0.1) 2px,
                rgba(212, 175, 55, 0.1) 4px
            );
            pointer-events: none;
        }

        /* Estilos para la navegación principal */
        .main-nav {
            background-color: #000000;
            padding: 2rem;
            border: 1px solid var(--accent-gold);
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.5);
            margin-bottom: 2rem;
            position: relative;
        }

        .nav-section {
            margin-bottom: 3rem;
            position: relative;
        }

        .nav-section::after {
            content: '';
            position: absolute;
            bottom: -1.5rem;
            left: 0;
            right: 0;
            height: 1px;
            background: linear-gradient(
                to right,
                transparent,
                var(--accent-gold),
                transparent
            );
            opacity: 0.3;
        }

        /* Estilos de texto */
        h1, h2, h3, h4, h5, h6 {
            font-family: var(--font-heading);
            letter-spacing: 1px;
            text-transform: uppercase;
        }

        .content-section h2 {
            font-size: 2.5em;
            margin-bottom: 1.5em;
            text-align: center;
            color: var(--accent-gold);
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
            position: relative;
            padding-bottom: 1rem;
        }

        .content-section h2::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 100px;
            height: 2px;
            background-color: var(--accent-gold);
        }

        /* Efecto de fondo sutil */
        .background-effect {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                repeating-linear-gradient(
                    45deg,
                    rgba(139, 0, 0, 0.05) 0px,
                    rgba(139, 0, 0, 0.05) 1px,
                    transparent 1px,
                    transparent 10px
                );
            pointer-events: none;
            z-index: -1;
        }

        /* Agregar estos estilos */
        .coming-soon {
            color: var(--gold);
            font-family: 'Special Elite', monospace;
            text-transform: uppercase;
            letter-spacing: 2px;
            margin: 1rem 0;
            padding: 1rem;
            border: 1px dashed var(--gold);
            background-color: rgba(0, 0, 0, 0.5);
            position: relative;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { opacity: 0.7; }
            50% { opacity: 1; }
            100% { opacity: 0.7; }
        }

        .platform-section.disabled {
            opacity: 0.8;
        }

        .platform-section.disabled .platform-btn {
            pointer-events: none;
            opacity: 0.5;
            position: relative;
        }

        .platform-section.disabled .platform-btn::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: repeating-linear-gradient(
                45deg,
                rgba(0, 0, 0, 0.1),
                rgba(0, 0, 0, 0.1) 10px,
                rgba(0, 0, 0, 0.2) 10px,
                rgba(0, 0, 0, 0.2) 20px
            );
        }

        /* Estilos para la sección de Demo */
        .demo-section {
            margin-top: 4rem;
            padding: 2rem;
            text-align: center;
            border: 2px solid var(--gold);
            background-color: rgba(139, 0, 0, 0.1);
            max-width: 800px;
            width: 90%;
            margin-left: auto;
            margin-right: auto;
            position: relative;
            overflow: hidden;
        }

        .demo-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                linear-gradient(45deg, 
                    transparent 0%,
                    rgba(255, 215, 0, 0.1) 50%,
                    transparent 100%);
            pointer-events: none;
        }

        .demo-section h2 {
            color: var(--gold);
            font-size: 2rem;
            margin-bottom: 1.5rem;
            text-transform: uppercase;
            letter-spacing: 3px;
            text-shadow: var(--text-shadow);
        }

        .demo-content p {
            color: var(--gold);
            font-size: 1.1rem;
            margin-bottom: 2rem;
            opacity: 0.9;
        }

        .demo-btn {
            background-color: var(--gold);
            color: var(--black);
            border: none;
            padding: 1rem 2.5rem;
            font-size: 1.2rem;
            text-transform: uppercase;
            letter-spacing: 2px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'Special Elite', monospace;
            position: relative;
            overflow: hidden;
        }

        .demo-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 0 20px rgba(255, 215, 0, 0.4);
        }

        .demo-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(
                120deg,
                transparent,
                rgba(255, 255, 255, 0.3),
                transparent
            );
            transition: all 0.6s;
        }

        .demo-btn:hover::before {
            left: 100%;
        }

        /* Ajuste responsive */
        @media (max-width: 768px) {
            .demo-section {
                padding: 1.5rem;
                margin-top: 2rem;
            }

            .demo-section h2 {
                font-size: 1.5rem;
            }

            .demo-content p {
                font-size: 1rem;
            }

            .demo-btn {
                padding: 0.8rem 2rem;
                font-size: 1rem;
            }
        }

        /* Estilo para el mensaje de demo próximamente */
        .demo-available {
            margin-top: 1rem;
            padding: 0.5rem;
            border-top: 1px dashed var(--gold);
            font-size: 0.9rem;
            color: var(--gold);
            opacity: 0.8;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .demo-available span {
            display: inline-block;
            position: relative;
            padding: 0.3rem 0;
        }

        .demo-available span::after {
            content: '!';
            position: absolute;
            right: -12px;
            animation: blink 1.5s infinite;
        }

        @keyframes blink {
            0%, 100% { opacity: 1; }
            50% { opacity: 0; }
        }

        /* Ajuste del espaciado para la sección de PC */
        .platform-section.disabled {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        /* Ajuste responsive */
        @media (max-width: 768px) {
            .demo-available {
                font-size: 0.8rem;
                padding: 0.3rem;
            }
        }

        /* Estilos para la sección de la Madriguera del Conejo */
        .rabbit-hole-section {
            margin-top: 4rem;
            padding: 3rem 2rem;
            background-color: rgba(139, 0, 0, 0.1);
            border: 2px solid var(--gold);
            max-width: 1200px;
            width: 90%;
            margin-left: auto;
            margin-right: auto;
            position: relative;
        }

        .rabbit-hole-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                linear-gradient(45deg, 
                    rgba(139, 0, 0, 0.1) 25%, 
                    transparent 25%),
                linear-gradient(-45deg, 
                    rgba(139, 0, 0, 0.1) 25%, 
                    transparent 25%);
            background-size: 4px 4px;
            pointer-events: none;
        }

        .rabbit-hole-section h2 {
            color: var(--gold);
            font-size: 2.5rem;
            text-align: center;
            margin-bottom: 0.5rem;
            text-transform: uppercase;
            letter-spacing: 3px;
            text-shadow: var(--text-shadow);
        }

        .subtitle {
            color: var(--gold);
            text-align: center;
            font-size: 1.2rem;
            margin-bottom: 3rem;
            opacity: 0.8;
            font-style: italic;
        }

        .character-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 2rem;
            padding: 1rem;
        }

        .character-card {
            background-color: rgba(0, 0, 0, 0.7);
            border: 1px solid var(--gold);
            padding: 2rem;
            text-align: center;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .character-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 0 20px rgba(255, 215, 0, 0.2);
        }

        .character-image {
            position: relative;
            width: 200px;
            height: 200px;
            margin: 0 auto 1.5rem;
            overflow: hidden;
            border: 2px solid var(--gold);
        }

        .character-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            filter: sepia(20%) hue-rotate(320deg);
            transition: all 0.3s ease;
        }

        .image-glitch {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(
                45deg,
                transparent 0%,
                rgba(255, 215, 0, 0.2) 50%,
                transparent 100%
            );
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .character-card:hover .image-glitch {
            opacity: 1;
            animation: glitch 2s infinite;
        }

        .character-card h3 {
            color: var(--gold);
            font-size: 1.5rem;
            margin-bottom: 1rem;
            text-transform: uppercase;
            letter-spacing: 2px;
        }

        .character-card p {
            color: var(--gold);
            font-size: 0.9rem;
            margin-bottom: 2rem;
            line-height: 1.6;
            opacity: 0.8;
        }

        .chat-btn {
            display: inline-block;
            background-color: transparent;
            border: 1px solid var(--gold);
            color: var(--gold);
            padding: 1rem 2rem;
            text-decoration: none;
            text-transform: uppercase;
            letter-spacing: 2px;
            position: relative;
            overflow: hidden;
            transition: all 0.3s ease;
        }

        .chat-btn:hover {
            background-color: var(--gold);
            color: var(--black);
        }

        .btn-glitch {
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(
                120deg,
                transparent,
                rgba(255, 215, 0, 0.4),
                transparent
            );
            transition: 0.5s;
        }

        .chat-btn:hover .btn-glitch {
            left: 100%;
        }

        @keyframes glitch {
            0% { transform: translate(0) }
            20% { transform: translate(-5px, 5px) }
            40% { transform: translate(-5px, -5px) }
            60% { transform: translate(5px, 5px) }
            80% { transform: translate(5px, -5px) }
            100% { transform: translate(0) }
        }

        /* Responsive design */
        @media (max-width: 968px) {
            .character-grid {
                grid-template-columns: 1fr;
                gap: 3rem;
            }

            .rabbit-hole-section h2 {
                font-size: 2rem;
            }

            .subtitle {
                font-size: 1rem;
            }

            .character-card {
                padding: 1.5rem;
            }

            .character-image {
                width: 150px;
                height: 150px;
            }
        }

        /* Actualizamos los estilos para un ambiente más perturbador */
        .text-adventure-section {
            margin-top: 4rem;
            max-width: 1000px;
            width: 90%;
            margin-left: auto;
            margin-right: auto;
            position: relative;
            background: rgba(0, 0, 0, 0.95);
            border: 2px solid var(--gold);
            box-shadow: 0 0 20px rgba(139, 0, 0, 0.2);
        }

        .terminal-title {
            font-family: 'Special Elite', cursive;
            color: var(--gold);
            text-shadow: 0 0 5px var(--gold);
            padding: 1rem;
            border-bottom: 1px dashed var(--gold);
            opacity: 0.8;
            animation: flicker 4s infinite;
        }

        .game-content {
            padding: 2rem;
            background: 
                linear-gradient(rgba(0,0,0,0.9), rgba(0,0,0,0.9)),
                url('paper-texture.png');
            position: relative;
        }

        .location-name {
            color: var(--gold);
            font-family: 'Creepster', cursive;
            font-size: 1.5rem;
            margin-bottom: 2rem;
            text-shadow: 2px 2px 4px rgba(139, 0, 0, 0.5);
            letter-spacing: 2px;
            animation: textShadowPulse 4s infinite;
        }

        #story-text {
            font-family: 'Crimson Text', serif;
            font-size: 1.1rem;
            line-height: 1.8;
            color: var(--gold);
            text-shadow: 0 0 2px var(--gold);
            margin-bottom: 2rem;
            position: relative;
        }

        .choice-btn {
            width: 100%;
            text-align: left;
            padding: 1rem;
            margin: 0.5rem 0;
            background: transparent;
            border: 1px solid var(--gold);
            color: var(--gold);
            font-family: 'Special Elite', cursive;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .choice-btn:hover {
            background: rgba(139, 0, 0, 0.2);
            transform: translateX(10px);
            text-shadow: 0 0 5px var(--gold);
        }

        .choice-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(
                120deg,
                transparent,
                rgba(255, 215, 0, 0.2),
                transparent
            );
            transition: 0.5s;
        }

        .choice-btn:hover::before {
            left: 100%;
        }

        @keyframes textShadowPulse {
            0% { text-shadow: 0 0 4px var(--gold); }
            50% { text-shadow: 0 0 12px var(--gold); }
            100% { text-shadow: 0 0 4px var(--gold); }
        }

        /* Efecto de papel viejo */
        .game-content::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                repeating-linear-gradient(
                    45deg,
                    rgba(139, 0, 0, 0.05),
                    rgba(139, 0, 0, 0.05) 2px,
                    transparent 2px,
                    transparent 8px
                );
            pointer-events: none;
        }

        .game-title {
            color: var(--gold);
            font-size: 3rem;
            text-shadow: 0 0 10px var(--gold);
            margin-bottom: 2rem;
            font-family: 'Special Elite', cursive;
            animation: titlePulse 3s infinite;
        }

        @keyframes titlePulse {
            0% { text-shadow: 0 0 10px var(--gold); }
            50% { text-shadow: 0 0 20px var(--gold), 0 0 30px var(--dark-gold); }
            100% { text-shadow: 0 0 10px var(--gold); }
        }

        .menu-options {
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
            align-items: center;
            margin-top: 3rem;
        }

        .menu-btn {
            background: transparent;
            border: 2px solid var(--gold);
            color: var(--gold);
            padding: 1rem 3rem;
            font-size: 1.2rem;
            font-family: 'Special Elite', cursive;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            width: 250px;
            text-transform: uppercase;
            letter-spacing: 2px;
        }

        .menu-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .menu-btn:not(:disabled):hover {
            background: var(--gold);
            color: var(--black);
            transform: translateY(-2px);
            box-shadow: 0 0 15px var(--gold);
        }

        .menu-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(
                120deg,
                transparent,
                rgba(255, 215, 0, 0.2),
                transparent
            );
            transition: 0.5s;
        }

        .menu-btn:not(:disabled):hover::before {
            left: 100%;
        }

        #game-container {
            opacity: 0;
            transition: opacity 0.5s ease;
        }

        #game-container.active {
            opacity: 1;
        }

        .choice-btn {
            opacity: 0;
            transform: translateY(20px);
            animation: fadeInUp 0.5s forwards;
        }

        @keyframes fadeInUp {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Agregar en la sección de estilos */
        .support-section {
            margin-top: 4rem;
            padding: 3rem 2rem;
            background-color: rgba(139, 0, 0, 0.1);
            border: 2px solid var(--gold);
            max-width: 1200px;
            width: 90%;
            margin-left: auto;
            margin-right: auto;
            position: relative;
        }

        .support-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                linear-gradient(45deg, 
                    rgba(139, 0, 0, 0.1) 25%, 
                    transparent 25%),
                linear-gradient(-45deg, 
                    rgba(139, 0, 0, 0.1) 25%, 
                    transparent 25%);
            background-size: 4px 4px;
            pointer-events: none;
        }

        .support-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2rem;
            padding: 1rem;
            margin-top: 2rem;
        }

        .support-card {
            background-color: rgba(0, 0, 0, 0.7);
            border: 1px solid var(--gold);
            padding: 2rem;
            text-align: center;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .support-card:hover:not(.disabled) {
            transform: translateY(-5px);
            box-shadow: 0 0 20px rgba(255, 215, 0, 0.2);
        }

        .support-card i {
            font-size: 3rem;
            color: var(--gold);
            margin-bottom: 1rem;
            text-shadow: 0 0 10px var(--gold);
        }

        .support-card h3 {
            color: var(--gold);
            font-size: 1.5rem;
            margin-bottom: 1rem;
            text-transform: uppercase;
            letter-spacing: 2px;
        }

        .support-card p {
            color: var(--gold);
            font-size: 0.9rem;
            margin-bottom: 2rem;
            line-height: 1.6;
            opacity: 0.8;
        }

        .support-btn {
            display: inline-block;
            background-color: transparent;
            border: 1px solid var(--gold);
            color: var(--gold);
            padding: 1rem 2rem;
            text-decoration: none;
            text-transform: uppercase;
            letter-spacing: 2px;
            position: relative;
            overflow: hidden;
            transition: all 0.3s ease;
            cursor: pointer;
            font-family: var(--font-accent);
        }

        .support-btn:not(:disabled):hover {
            background-color: var(--gold);
            color: var(--black);
        }

        .support-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .support-card.disabled {
            opacity: 0.8;
        }

        .support-card.disabled .coming-soon {
            margin: 1rem 0;
            padding: 0.5rem;
            border: 1px dashed var(--gold);
            background-color: rgba(0, 0, 0, 0.5);
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 1px;
            animation: pulse 2s infinite;
        }

        @media (max-width: 768px) {
            .support-grid {
                grid-template-columns: 1fr;
            }

            .support-card {
                padding: 1.5rem;
            }
        }

        /* Estilos para la sección de Discord */
        .discord-section {
            margin-top: 4rem;
            padding: 3rem 2rem;
            background-color: rgba(114, 137, 218, 0.1);
            border: 2px solid var(--gold);
            max-width: 800px;
            width: 90%;
            margin-left: auto;
            margin-right: auto;
            margin-bottom: 4rem;
            position: relative;
        }

        .discord-card {
            background-color: rgba(0, 0, 0, 0.7);
            border: 1px solid var(--gold);
            padding: 3rem 2rem;
            text-align: center;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .discord-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 0 20px rgba(255, 215, 0, 0.2);
        }

        .discord-card i {
            font-size: 4rem;
            color: var(--gold);
            margin-bottom: 1.5rem;
            text-shadow: 0 0 10px var(--gold);
        }

        .discord-card h3 {
            color: var(--gold);
            font-size: 1.8rem;
            margin-bottom: 1rem;
            text-transform: uppercase;
            letter-spacing: 2px;
        }

        .discord-card p {
            color: var(--gold);
            font-size: 1.1rem;
            margin-bottom: 2rem;
            line-height: 1.6;
            opacity: 0.8;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
        }

        .discord-btn {
            display: inline-block;
            background-color: transparent;
            border: 1px solid var(--gold);
            color: var(--gold);
            padding: 1rem 2.5rem;
            text-decoration: none;
            text-transform: uppercase;
            letter-spacing: 2px;
            position: relative;
            overflow: hidden;
            transition: all 0.3s ease;
            font-family: var(--font-accent);
        }

        .discord-btn:hover {
            background-color: var(--gold);
            color: var(--black);
            transform: translateY(-2px);
            box-shadow: 0 0 15px rgba(255, 215, 0, 0.3);
        }

        .discord-btn .btn-glitch {
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(
                120deg,
                transparent,
                rgba(255, 215, 0, 0.4),
                transparent
            );
            transition: 0.5s;
        }

        .discord-btn:hover .btn-glitch {
            left: 100%;
        }

        @media (max-width: 768px) {
            .cta-container h2 {
                font-size: 2rem;
            }

            .cta-text {
                font-size: 1rem;
            }

            .discord-card {
                padding: 2rem 1rem;
            }

            .discord-card h3 {
                font-size: 1.5rem;
            }

            .discord-card p {
                font-size: 1rem;
            }
        }

        /* Agregar en la sección de estilos */
        .language-selector {
            position: fixed;
            top: 15px;
            right: 80px;
            z-index: 1000;
        }

        .language-btn {
            background: transparent;
            border: 1px solid var(--gold);
            color: var(--gold);
            padding: 5px 10px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 5px;
            font-family: var(--font-accent);
            transition: all 0.3s ease;
        }

        .language-btn:hover,
        .language-option:hover {
            background-color: rgba(255, 215, 0, 0.1);
        }

        .language-btn.current {
            background-color: rgba(255, 215, 0, 0.2);
        }

        .language-dropdown {
            position: absolute;
            top: 100%;
            right: 0;
            background: rgba(0, 0, 0, 0.9);
            border: 1px solid var(--gold);
            display: none;
            flex-direction: column;
            width: 100%;
        }

        .language-selector:hover .language-dropdown {
            display: flex;
        }

        .language-option {
            background: transparent;
            border: none;
            color: var(--gold);
            padding: 5px 10px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 5px;
            font-family: var(--font-accent);
            transition: all 0.3s ease;
        }

        @media (max-width: 768px) {
            .language-selector {
                right: 60px;
            }
        }
    </style>
</head>
<body>
    <nav class="menu">
        <!-- Botón hamburguesa -->
        <button class="nav-toggle" aria-label="Abrir menú" aria-expanded="false" aria-controls="menu-items">
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
        </button>

        <!-- Overlay para el menú -->
        <div class="menu-overlay"></div>

        <!-- Menú items -->
        <div class="menu-items" id="menu-items">
            <a href="#about">ABOUT</a>
            <a href="#demo">DEMO</a>
            <a href="#merch">MERCH</a>
            <a href="#faq">FAQ / CONTACT</a>
        </div>

        <!-- Agregar dentro del nav, después del menu-items -->
        <div class="language-selector">
            <button class="language-btn current" data-lang="en">EN</button>
            <div class="language-dropdown">
                <button class="language-option" data-lang="es">ES</button>
                <button class="language-option" data-lang="ja">JA</button>
                <button class="language-option" data-lang="ru">RU</button>
            </div>
        </div>
    </nav>

    <main class="main-content">
        <div class="background-effect"></div>
        <img src="game-logo.png" alt="Where are the Alices?" class="game-logo">

        <div class="platforms-grid">
            <div class="platform-section disabled">
                <h3>Nintendo Switch</h3>
                <div class="coming-soon">Coming Soon</div>
                <button class="platform-btn" disabled>Nintendo eShop</button>
                <button class="platform-btn" disabled>Physical Edition</button>
            </div>

            <div class="platform-section disabled">
                <h3>PC / Mac</h3>
                <div class="coming-soon">Coming Soon</div>
                <button class="platform-btn" disabled>Steam</button>
                <button class="platform-btn" disabled>Epic Games</button>
                <button class="platform-btn" disabled>GOG</button>
                <div class="demo-available">
                    <span>Demo coming soon</span>
                </div>
            </div>

            <div class="platform-section disabled">
                <h3>PlayStation</h3>
                <div class="coming-soon">Coming Soon</div>
                <button class="platform-btn" disabled>PS4 / PS5</button>
                <button class="platform-btn" disabled>Physical Edition</button>
            </div>
        </div>

        <section class="news-section">
            <div class="cta-container">
                <h2>Dare to Enter?</h2>
                <p class="cta-text">Step into a world where nightmares come to life and dolls hold dark secrets. Discover what really happened to the Alices... if you dare.</p>
                <button class="cta-btn glitch-effect">
                    <span class="btn-text">Begin the Nightmare</span>
                    <span class="btn-glitch"></span>
                </button>
            </div>
        </section>

        <div class="support-section">
            <h2>Support Development</h2>
            <p class="subtitle">Help us bring more nightmares to reality</p>
            
            <div class="support-grid">
                <div class="support-card">
                    <i class="fab fa-paypal"></i>
                    <h3>PayPal</h3>
                    <p>One-time contribution to development</p>
                    <a href="#" class="support-btn">
                        <span class="btn-text">Donate with PayPal</span>
                        <span class="btn-glitch"></span>
                    </a>
                </div>

                <div class="support-card">
                    <i class="fab fa-patreon"></i>
                    <h3>Patreon</h3>
                    <p>Exclusive access to development and special content</p>
                    <a href="#" class="support-btn">
                        <span class="btn-text">Join on Patreon</span>
                        <span class="btn-glitch"></span>
                    </a>
                </div>

                <div class="support-card">
                    <i class="fas fa-coffee"></i>
                    <h3>Ko-fi</h3>
                    <p>Buy us a coffee to keep the nightmares alive</p>
                    <a href="#" class="support-btn">
                        <span class="btn-text">Buy a Ko-fi</span>
                        <span class="btn-glitch"></span>
                    </a>
                </div>

                <div class="support-card disabled">
                    <i class="fas fa-rocket"></i>
                    <h3>Indiegogo</h3>
                    <p>Crowdfunding campaign coming soon</p>
                    <div class="coming-soon">Coming Soon</div>
                    <button class="support-btn" disabled>
                        <span class="btn-text">Pre-order</span>
                        <span class="btn-glitch"></span>
                    </button>
                </div>
            </div>
        </div>

        <div class="demo-section">
            <h2>Try the Demo</h2>
            <div class="demo-content">
                <p>Explore the first chapter of Where are the Alices?</p>
                <button class="demo-btn">Download Demo</button>
            </div>
        </div>

        <!-- Sección de Chatbots después de la Demo -->
        <div class="rabbit-hole-section">
            <h2>Enter the Rabbit Hole</h2>
            <p class="subtitle">Talk to nightmares made real</p>
            
            <div class="character-grid">
                <div class="character-card">
                    <div class="character-image">
                        <img src="juno-detective.jpg" alt="Juno the Detective">
                        <div class="image-glitch"></div>
                    </div>
                    <h3>Juno the Detective</h3>
                    <p>A young detective determined to uncover the truth behind the disappearances. Her determination will lead her to face horrors beyond her comprehension, but nothing will stop her until she finds all the Alices.</p>
                    <a href="#" class="chat-btn">
                        <span class="btn-text">Start Conversation</span>
                        <span class="btn-glitch"></span>
                    </a>
                </div>

                <div class="character-card">
                    <div class="character-image">
                        <img src="cb-white-rabbit.jpg" alt="CB the White Rabbit">
                        <div class="image-glitch"></div>
                    </div>
                    <h3>CB the White Rabbit</h3>
                    <p>A cunning and manipulative antagonist who delights in playing with the minds of his victims. Beneath his elegant appearance and refined manners lies an entity that collects lost souls in his twisted wonderland.</p>
                    <a href="https://character.ai/chat/oqreJlXJ_idtC2zeRbAvOaodI8TaPPK4lGy9ADgdvT0" class="chat-btn" target="_blank">
                        <span class="btn-text">Chat with CB</span>
                        <span class="btn-glitch"></span>
                    </a>
                </div>
            </div>
        </div>

        <!-- Sección de Aventura de Texto -->
        <div class="text-adventure-section">
            <div class="crt-frame">
                <div class="crt-screen">
                    <div class="game-header">
                        <div class="window-controls">
                            <button class="window-control" aria-label="Close">×</button>
                            <button class="window-control" aria-label="Maximize">□</button>
                            <button class="window-control" aria-label="Minimize">─</button>
                        </div>
                        <div class="terminal-title">C:\\WHERE_ARE_THE_ALICES\\DEMO.exe</div>
                    </div>
                    
                    <div id="game-menu" class="game-content">
                        <h1 class="game-title">Where are the Alices?</h1>
                        <div class="menu-options">
                            <button class="menu-btn start-game">Start Game</button>
                            <button class="menu-btn continue-game" disabled>Continue</button>
                            <button class="menu-btn show-credits">Credits</button>
                        </div>
                    </div>

                    <div id="game-container" class="game-content" style="display: none;">
                        <div id="story-container">
                            <div class="location-name">Abandoned Mansion - Main Entrance</div>
                            <div id="story-text"></div>
                            <div id="choices-container"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <footer class="footer">
        <p>© 2024 ZimmZimmGames. All rights reserved.</p>
    </footer>

    <!-- Agregar la sección de Discord al final, antes del footer -->
    <div class="discord-section">
        <h2>Join the Community</h2>
        <p class="subtitle">Share your theories and uncover secrets with other investigators</p>
        <div class="discord-card">
            <i class="fab fa-discord"></i>
            <h3>Official Discord Server</h3>
            <p>Join our detective community and share your discoveries about the disappearances. Can you solve the mystery before it's too late?</p>
            <a href="#" class="discord-btn">
                <span class="btn-text">Join Discord</span>
                <span class="btn-glitch"></span>
            </a>
        </div>
    </div>

    <script>
        // Efecto de glitch aleatorio en el logo
        const logo = document.querySelector('.game-logo');
        setInterval(() => {
            if (Math.random() < 0.1) {
                logo.style.filter = 'hue-rotate(90deg) brightness(1.5)';
                setTimeout(() => {
                    logo.style.filter = 'none';
                }, 150);
            }
        }, 4000);

        // Funcionalidad del menú hamburguesa
        document.addEventListener('DOMContentLoaded', function() {
            const toggleButton = document.querySelector('.nav-toggle');
            const menuItems = document.querySelector('.menu-items');
            const menuOverlay = document.querySelector('.menu-overlay');
            const body = document.body;

            function toggleMenu() {
                const isExpanded = toggleButton.getAttribute('aria-expanded') === 'true';
                toggleButton.setAttribute('aria-expanded', !isExpanded);
                menuItems.classList.toggle('active');
                menuOverlay.classList.toggle('active');
                body.classList.toggle('menu-open');
            }

            // Toggle menu on button click
            toggleButton.addEventListener('click', toggleMenu);

            // Cerrar menú al hacer click en el overlay
            menuOverlay.addEventListener('click', toggleMenu);

            // Cerrar menú al hacer click en un enlace
            menuItems.querySelectorAll('a').forEach(link => {
                link.addEventListener('click', () => {
                    toggleMenu();
                });
            });

            // Cerrar menú con la tecla Escape
            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape' && toggleButton.getAttribute('aria-expanded') === 'true') {
                    toggleMenu();
                }
            });
        });

        // Audio elements
        const gameAudio = {
            menuMusic: new Audio('https://www.fesliyanstudios.com/musicfiles/2019-04-20_-_Dark_Fog_-_David_Fesliyan.mp3'),
            gameMusic: new Audio('https://www.fesliyanstudios.com/musicfiles/2019-04-21_-_Dark_Shadows_-_David_Fesliyan.mp3'),
            gameOverMusic: new Audio('https://www.fesliyanstudios.com/musicfiles/2019-04-22_-_Evil_Rising_-_David_Fesliyan.mp3'),
            goodEndingMusic: new Audio('https://www.fesliyanstudios.com/musicfiles/2019-04-23_-_Haunted_Memories_-_David_Fesliyan.mp3'),
            badEndingMusic: new Audio('https://www.fesliyanstudios.com/musicfiles/2019-04-24_-_Dark_Winds_Chapter_1_-_David_Fesliyan.mp3'),
            typewriterSound: new Audio('https://www.fesliyanstudios.com/sound-effects-files/typewriter-2.mp3'),
            buttonClick: new Audio('https://www.fesliyanstudios.com/sound-effects-files/button-click-1.mp3'),
            pageChange: new Audio('https://www.fesliyanstudios.com/sound-effects-files/page-turn-2.mp3')
        };

        // Configure audio settings
        Object.values(gameAudio).forEach(audio => {
            audio.volume = 0.3;
            if (audio !== gameAudio.typewriterSound && audio !== gameAudio.buttonClick && audio !== gameAudio.pageChange) {
                audio.loop = true;
            }
        });
        gameAudio.typewriterSound.volume = 0.1;

        const storyData = {
            start: {
                location: "El Jardín de las Muñecas",
                text: "Mamá siempre dice que no debemos hablar con extraños... pero ¿qué pasa cuando los extraños se parecen a personas que conocemos? Juno lo descubrió una noche, mientras investigaba la desaparición de Alice. Frente a ella, a través de la niebla del jardín, había muñecas. Docenas de muñecas con rostros familiares, todas sentadas en círculo alrededor de una mesa de té. Y en el centro... un conejo blanco con ojos de botón.",
                choices: {
                    approach: "Acercarse a la mesa de té",
                    examine: "Observar los rostros de las muñecas",
                    run: "Dar media vuelta y huir",
                    investigate_surroundings: "Investigar los alrededores"
                }
            },
            investigate_surroundings: {
                location: "Los Límites del Jardín",
                text: "Mientras Juno exploraba los bordes del jardín, notó algo extraño: las sombras parecían moverse en dirección opuesta a la luz. Y había marcas en el suelo, como si alguien hubiera arrastrado algo... o alguien. Entre los arbustos, un destello metálico llamó su atención.",
                choices: {
                    follow_marks: "Seguir las marcas en el suelo",
                    check_metal: "Investigar el destello metálico",
                    return_party: "Volver a la fiesta de té",
                    call_backup: "Llamar refuerzos"
                }
            },
            follow_marks: {
                location: "El Rastro Oscuro",
                text: "Las marcas llevaron a Juno hasta una pequeña puerta oculta entre las enredaderas. Parecía antigua, con símbolos extraños tallados en el marco. A través de las grietas, podía escuchar el sonido de una caja de música y risas infantiles distorsionadas.",
                choices: {
                    open_door: "Abrir la puerta",
                    decode_symbols: "Estudiar los símbolos",
                    find_key: "Buscar una llave",
                    return_garden: "Regresar al jardín"
                }
            },
            check_metal: {
                location: "El Tesoro Enterrado",
                text: "El destello provenía de una vieja caja de música enterrada parcialmente. Al tocarla, la caja comenzó a sonar por sí sola, tocando una melodía inquietante. Dentro, Juno encontró una llave dorada y una nota escrita con letra infantil: 'Los botones son la llave, pero también la prisión'.",
                choices: {
                    take_key: "Tomar la llave",
                    read_more: "Buscar más notas",
                    follow_music: "Seguir la melodía",
                    bury_box: "Volver a enterrar la caja"
                }
            },
            take_key: {
                location: "La Llave Dorada",
                text: "En el momento en que Juno tomó la llave, todas las muñecas giraron sus cabezas hacia ella al unísono. El conejo se levantó lentamente, sus ojos de botón brillando con un resplandor rojizo. 'Ah, has encontrado la llave maestra', dijo con voz melosa. 'Ahora podrás abrir todas las puertas... o cerrarlas para siempre'.",
                choices: {
                    use_key: "Usar la llave en la puerta más cercana",
                    confront_rabbit_key: "Confrontar al conejo con la llave",
                    free_dolls: "Intentar liberar a las muñecas",
                    destroy_key: "Destruir la llave"
                }
            },
            destroy_key: {
                location: "La Decisión Final",
                text: "Con determinación, Juno arrojó la llave contra el suelo con todas sus fuerzas. Al romperse, una luz dorada emergió, envolviendo todo el jardín. Las muñecas comenzaron a brillar, sus costuras deshaciéndose, revelando a los niños atrapados en su interior. El conejo aulló de rabia mientras su forma se desvanecía en la oscuridad.",
                choices: {
                    save_children: "Guiar a los niños hacia la salida",
                    fight_rabbit: "Enfrentar al conejo debilitado",
                    seal_garden: "Sellar el jardín para siempre"
                }
            },
            save_children: {
                location: "El Rescate",
                text: "Uno por uno, los niños emergieron de sus prisiones de porcelana, desorientados pero vivos. Alice estaba entre ellos, sus ojos nuevamente humanos y llenos de lágrimas de alegría. Mientras Juno los guiaba hacia la salida, el jardín comenzó a desmoronarse, llevándose consigo los horrores que había contenido durante tanto tiempo.",
                choices: {
                    true_ending: "Escapar con los niños"
                }
            },
            true_ending: {
                location: "El Verdadero Final",
                text: "El sol se alzó sobre un nuevo día, iluminando a los niños rescatados reunidos con sus familias. El jardín de las muñecas había desaparecido, dejando solo un terreno vacío y un recuerdo distante de pesadilla. Juno guardó un botón roto como recordatorio: a veces, la verdadera valentía está en romper las reglas de un juego macabro. Los niños desaparecidos volvieron a casa, y el conejo blanco nunca más volvió a invitar a nadie a tomar el té.",
                choices: {
                    restart: "Comenzar una nueva investigación"
                }
            },
            seal_garden: {
                location: "El Sello Eterno",
                text: "Usando los fragmentos de la llave, Juno trazó un círculo alrededor del jardín. Las sombras se solidificaron, formando una barrera impenetrable. Los niños fueron liberados, pero el jardín quedaría sellado para siempre, junto con sus horrores. El conejo quedó atrapado en su propio reino de pesadillas, incapaz de cazar nuevamente.",
                choices: {
                    guardian_ending: "Convertirse en guardiana"
                }
            },
            guardian_ending: {
                location: "La Guardiana del Sello",
                text: "Años después, la gente habla de una detective que vigila un terreno vacío. Sus ojos brillan en la oscuridad, no con botones, sino con el poder del sello que mantiene encerradas las pesadillas. Los niños están a salvo, pero Juno nunca olvidará el precio de la victoria: una eternidad vigilando que el conejo nunca escape de su prisión de sombras.",
                choices: {
                    restart: "Comenzar una nueva investigación"
                }
            },
            fight_rabbit: {
                location: "La Confrontación Final",
                text: "El conejo se alzó, su forma distorsionándose en una masa de agujas y sombras. 'Si tanto deseas ver el verdadero rostro de la pesadilla, ¡que así sea!'. Juno enfrentó al horror con determinación, usando los fragmentos de la llave como arma. Cada golpe revelaba más de la verdadera forma del conejo: un vacío con hambre de inocencia.",
                choices: {
                    final_strike: "Dar el golpe final",
                    banish_rabbit: "Desterrar al conejo",
                    sacrifice: "Sacrificarse por los niños"
                }
            },
            final_strike: {
                location: "El Último Golpe",
                text: "Con un grito de batalla, Juno clavó el fragmento más grande de la llave en el centro del conejo. Una explosión de luz dorada inundó el jardín, y el horror se deshizo como niebla bajo el sol. Los niños fueron liberados, y el mal que había atormentado el jardín fue destruido para siempre.",
                choices: {
                    hero_ending: "Aceptar el rol de heroína"
                }
            },
            hero_ending: {
                location: "La Heroína del Jardín",
                text: "La leyenda de la detective que derrotó al conejo blanco se convirtió en un cuento para dormir, pero uno que da esperanza en lugar de miedo. Los niños rescatados crecieron sabiendo que los monstruos pueden ser vencidos, y Juno siguió protegiendo a los inocentes, ahora con la sabiduría de quien ha mirado a la oscuridad a los ojos y ha ganado.",
                choices: {
                    restart: "Comenzar una nueva investigación"
                }
            },
            sacrifice: {
                location: "El Sacrificio Final",
                text: "Comprendiendo que la única forma de salvar a los niños era ofrecer un reemplazo, Juno dio un paso adelante. 'Tómame a mí', declaró. 'Libera a los niños y ocupa mi lugar'. El conejo sonrió, y con un movimiento de sus garras, los niños fueron liberados mientras Juno sentía los hilos comenzar a tejer su nueva forma.",
                choices: {
                    sacrifice_ending: "Aceptar la transformación"
                }
            },
            sacrifice_ending: {
                location: "La Guardiana de Porcelana",
                text: "Ahora hay una nueva muñeca en el jardín, una que lleva un pequeño abrigo de detective y tiene los ojos más tristes. Pero gracias a su sacrificio, ningún otro niño desaparecerá jamás. Los que conocen la historia dicen que, en las noches de luna llena, la muñeca detective parece sonreír, satisfecha de haber salvado tantas vidas a cambio de la suya.",
                choices: {
                    restart: "Comenzar una nueva investigación"
                }
            },
            run: {
                location: "El Escape Fallido",
                text: "Juno giró sobre sus talones, pero sus piernas se enredaron con hilos negros que surgían del suelo. '¿Tan pronto te vas?', susurró el conejo. 'La fiesta apenas comienza, y Alice ha estado esperando tanto tiempo por una compañera de juegos...' Las muñecas comenzaron a levantarse, sus articulaciones crujiendo como madera vieja.",
                choices: {
                    fight_threads: "Luchar contra los hilos",
                    call_alice: "Llamar a Alice",
                    accept_fate: "Aceptar la invitación"
                }
            },
            fight_threads: {
                location: "La Danza de los Hilos",
                text: "Con determinación, Juno comenzó a arrancar los hilos que la ataban. Cada hilo roto emitía un chillido agudo, como si estuviera vivo. 'Qué descortés', murmuró el conejo, sacando un par de tijeras doradas. 'Si no quieres jugar con los hilos, quizás prefieras ser parte del patrón...'",
                choices: {
                    grab_scissors: "Intentar tomar las tijeras",
                    run_harder: "Correr hacia la salida",
                    negotiate: "Intentar negociar"
                }
            },
            examine: {
                location: "Entre las Muñecas",
                text: "Cada rostro resultaba inquietantemente familiar. Niños de carteles de personas desaparecidas, sus rasgos perfectamente recreados en porcelana. Pero sus ojos... sus ojos habían sido reemplazados por botones, negros como la medianoche. Una muñeca en particular llamó la atención de Juno: llevaba un vestido azul, igual al que Alice llevaba el día que desapareció.",
                choices: {
                    touch_doll: "Tocar la muñeca de Alice",
                    search_clues: "Buscar pistas alrededor de las muñecas",
                    follow_thread: "Seguir un hilo negro que se aleja"
                }
            },
            touch_doll: {
                location: "La Verdad de Porcelana",
                text: "En el momento en que los dedos de Juno tocaron la mejilla de la muñeca, su cabeza giró, no de forma mecánica, sino fluida como carne. 'No deberías tocar lo que no es tuyo', susurró con la voz de Alice. Los ojos de botón de la muñeca comenzaron a gotear hilo negro, y Juno sintió un dolor agudo en las yemas de sus dedos, donde los hilos habían comenzado a coserse en su piel.",
                choices: {
                    pull_away: "Intentar alejarse",
                    accept_threads: "Aceptar los hilos",
                    call_for_help: "Pedir ayuda"
                }
            },
            pull_away: {
                location: "El Precio de la Resistencia",
                text: "Juno tiró con todas sus fuerzas, pero los hilos se tensaron más. 'Duele menos si no luchas', susurró la muñeca-Alice. 'Yo también luché al principio, pero ahora... ahora soy hermosa. Ahora soy perfecta. Y tú también puedes serlo.' Los hilos comenzaron a tejer patrones en la piel de Juno, formando delicados diseños de encaje negro.",
                choices: {
                    bite_threads: "Morder los hilos",
                    scream_help: "Gritar por ayuda",
                    submit_transformation: "Someterse a la transformación"
                }
            },
            search_clues: {
                location: "Secretos Ocultos",
                text: "Detrás de cada muñeca, Juno encontró pequeños objetos: cintas para el cabello, pulseras de la amistad, pequeñas notas escritas con letra infantil. Bajo la muñeca de Alice había una página de diario: 'El conejo dice que si dejo que me cosa los botones, nunca más estaré sola. Dice que solo duele un momento...'",
                choices: {
                    take_evidence: "Recoger las evidencias",
                    confront_rabbit: "Confrontar al conejo",
                    run_with_clues: "Huir con el diario"
                }
            },
            approach: {
                location: "La Mesa de Té Eterna",
                text: "'¿Te gustaría un poco de té, querida?', susurró el conejo, su voz como papel de lija. Sus patas sostenían una taza que goteaba algo espeso y oscuro. Las muñecas giraron sus cabezas al unísono, sus botones brillando en la oscuridad. '¿O preferirías... ser parte de nuestra colección? Alice lo prefirió así'. Una de las muñecas, con un vestido azul manchado, sonrió con hilos sueltos.",
                choices: {
                    accept: "Aceptar la taza de té",
                    question: "Preguntar por Alice",
                    refuse: "Rechazar la invitación"
                }
            },
            refuse: {
                location: "El Precio del Rechazo",
                text: "'Me temo que esa no es una opción, detective', dijo el conejo mientras las muñecas se levantaban de sus sillas. 'Verás, una vez que encuentras nuestro pequeño jardín, debes unirte a la fiesta. Son las reglas.' Las muñecas comenzaron a rodear a Juno, sus botones brillando con una luz propia.",
                choices: {
                    fight_dolls: "Luchar contra las muñecas",
                    seek_exit: "Buscar una salida",
                    bargain: "Intentar negociar"
                }
            },
            question: {
                location: "El Círculo de Verdades",
                text: "El conejo inclinó su cabeza en un ángulo imposible. 'Oh, Alice está aquí... todas las Alices están aquí'. Sus palabras resonaron mientras las muñecas comenzaban a cantar una nana desafinada. Una a una, empezaron a descoserse sus propios rostros, revelando debajo... más botones. '¿No es hermoso? Nunca más estarán solas. Nunca más llorarán. ¿No quieres ser hermosa también, Juno?'",
                choices: {
                    fight: "Confrontar al conejo",
                    scream: "Gritar hasta despertar",
                    submit: "Alcanzar los botones"
                }
            },
            fight: {
                location: "La Danza de los Hilos",
                text: "Las agujas aparecieron de la nada, brillando como estrellas muertas. El conejo se alzó, creciendo más y más alto, sus hilos extendiéndose como telarañas negras. 'Todas luchan al principio, querida. Pero al final...' Su risa sonaba como tijeras cortando seda. '...al final todas entienden que es mejor así. Pregúntale al gato, si no me crees'. Y allí, entre las sombras, un gato sonrió con dientes de aguja, sus propios botones brillando con lágrimas de hilo.",
                choices: {
                    trust_cat: "Confiar en el gato sonriente",
                    cut_strings: "Cortar los hilos del conejo",
                    close_eyes: "Cerrar los ojos y desear despertar"
                }
            },
            trust_cat: {
                location: "El Teatro de Sombras",
                text: "'Sus botones mienten', ronroneó el gato, sus costuras abriéndose para mostrar el vacío interior. 'Pero mis cicatrices dicen la verdad. Cada Alice que bebe su té se convierte en otra muñeca de su colección. Cada sonrisa cosida esconde un grito. ¿Te gustaría ver qué hay realmente en esas tazas, detective?' El gato extendió una pata descosida, ofreciendo mostrar la verdad detrás de la cortina.",
                choices: {
                    see_truth: "Ver la verdad tras la cortina",
                    save_alice: "Intentar salvar a las muñecas",
                    escape: "Buscar una salida"
                }
            },
            see_truth: {
                location: "La Sala de las Agujas",
                text: "La cortina cayó, y con ella, la ilusión. No era una mesa de té, era una mesa de costura. No eran tazas, eran dedales llenos de hilo negro. Y el conejo... el conejo era una masa de agujas y tijeras con forma de conejo, un costurero viviente que tejía pesadillas. 'Ahora que has visto', dijo el gato, sus costuras deshaciéndose, 'debes elegir: ¿te convertirás en una historia para asustar a los niños, o en la pesadilla que asusta a las pesadillas?'",
                choices: {
                    become_nightmare: "Convertirse en pesadilla",
                    save_all: "Salvar a todas las muñecas",
                    wake_up: "Despertar al mundo real"
                }
            },
            save_all: {
                location: "La Liberación",
                text: "Con manos temblorosas, Juno agarró las tijeras de la forma del conejo. Antes de que pudiera reaccionar, comenzó a cortar hilos: negros, dorados, hilos que gritaban y hilos que cantaban. Con cada corte, una muñeca se convertía en niño de nuevo, los botones cayendo como lágrimas. El conejo aulló, su forma deshilachándose. '¡Lo has arruinado todo!', chilló, pero Juno no se detuvo hasta que cada niño estuvo libre.",
                choices: {
                    good_ending: "Guiar a los niños a casa"
                }
            },
            good_ending: {
                location: "El Amanecer",
                text: "El sol se alzó sobre un jardín lleno de niños, sus ojos brillantes y reales, sus sonrisas genuinas. Alice estaba entre ellos, sosteniendo la mano de Juno. El conejo se había ido, dejando solo un montón de tijeras e hilos. Pero Juno guardó un botón como recordatorio: no todos los monstruos se esconden bajo las camas. A veces te invitan a tomar el té. Los niños desaparecidos volvieron a casa, pero nunca olvidaron a la detective que los salvó de convertirse en muñecas.",
                choices: {
                    restart: "Comenzar una nueva investigación"
                }
            },
            become_nightmare: {
                location: "La Transformación",
                text: "Juno tomó la aguja que le ofrecía el gato. 'Para luchar contra monstruos', susurró, 'a veces debes convertirte en uno.' Se cosió botones en sus propios ojos, pero estos eran diferentes: podían ver la verdad en todas las cosas. El poder del conejo se volvió suyo, pero lo usó para proteger, no para atrapar. Ahora caza a aquellos que lastimarían a los niños, sus ojos de botón brillando en la oscuridad.",
                choices: {
                    continue_hunting: "Continuar cazando monstruos"
                }
            },
            game_over: {
                location: "La Colección",
                text: "En un jardín oscuro, hay una nueva muñeca sentada en la fiesta del té. Lleva un abrigo de detective y tiene los ojos de botón más hermosos. A veces, cuando la luna está en lo alto, puedes oírla susurrar advertencias a los niños que se acercan demasiado al jardín del conejo. Pero es demasiado tarde para la muñeca que una vez fue Juno: solo puede observar mientras la colección del conejo crece, un botón a la vez.",
                choices: {
                    restart: "Intentar de nuevo"
                }
            },
            call_backup: {
                location: "La Llamada de Auxilio",
                text: "Juno sacó su teléfono, pero la señal era inexistente. En su lugar, el dispositivo comenzó a reproducir una extraña melodía de caja de música. En la pantalla, números y letras se mezclaban formando un mensaje: 'Nadie puede ayudarte aquí. Solo tú puedes salvarlos... o unirte a ellos'.",
                choices: {
                    continue_alone: "Seguir investigando sola",
                    use_phone_light: "Usar la luz del teléfono para investigar",
                    throw_phone: "Arrojar el teléfono",
                    return_entrance: "Volver a la entrada"
                }
            },
            use_phone_light: {
                location: "Revelaciones en la Oscuridad",
                text: "La luz del teléfono reveló algo inquietante: las sombras de las muñecas no coincidían con sus cuerpos. Algunas sombras mostraban niños tratando de escapar, mientras otras revelaban formas retorcidas y monstruosas. El conejo proyectaba la sombra más grande de todas: una masa de agujas y tijeras con forma vagamente humana.",
                choices: {
                    photograph: "Tomar fotografías",
                    follow_shadows: "Seguir las sombras",
                    confront_truth: "Confrontar al conejo con la verdad",
                    run_away: "Huir del jardín"
                }
            },
            photograph: {
                location: "Evidencia Imposible",
                text: "Cada foto mostraba algo diferente: donde había muñecas, las imágenes mostraban niños atrapados en poses imposibles. El conejo no aparecía en ninguna foto, pero en su lugar había una figura alta y delgada con un traje victoriano manchado de algo oscuro. De repente, el teléfono comenzó a derretirse en las manos de Juno.",
                choices: {
                    save_evidence: "Intentar salvar las fotos",
                    accept_vision: "Aceptar la verdad revelada",
                    destroy_phone: "Destruir el teléfono",
                    share_truth: "Compartir la verdad con las muñecas"
                }
            },
            share_truth: {
                location: "El Despertar Colectivo",
                text: "Juno mostró las fotos a las muñecas antes de que el teléfono se derritiera por completo. Una a una, comenzaron a recordar quiénes eran. Sus ojos de botón cayeron, revelando ojos humanos llenos de lágrimas y determinación. El conejo rugió de furia mientras su control sobre ellas se debilitaba.",
                choices: {
                    lead_rebellion: "Liderar la rebelión",
                    protect_children: "Proteger a los niños",
                    face_rabbit: "Enfrentar al conejo",
                    escape_together: "Escapar todos juntos"
                }
            },
            lead_rebellion: {
                location: "La Revolución de las Muñecas",
                text: "Bajo el liderazgo de Juno, las muñecas-niños se alzaron contra su captor. Cada botón arrancado era un alma liberada, cada hilo roto una cadena menos. El conejo intentó mantener el control, pero su poder residía en el miedo, y los niños ya no tenían miedo. Con cada pequeño acto de rebeldía, su reino de pesadillas se desmoronaba.",
                choices: {
                    revolution_ending: "Completar la revolución",
                    protect_weak: "Proteger a los más débiles",
                    final_battle: "Batalla final"
                }
            },
            revolution_ending: {
                location: "El Triunfo de la Libertad",
                text: "El jardín de pesadillas se transformó en un campo de batalla donde la inocencia luchó contra el horror. Los niños, liberados de sus prisiones de porcelana, usaron sus propios hilos rotos como armas. El conejo, enfrentado a la fuerza del valor colectivo, se encogió hasta ser nada más que un juguete roto. Los niños eran libres, y su carcelero no era más que un mal recuerdo.",
                choices: {
                    restart: "Comenzar una nueva investigación"
                }
            },
            final_battle: {
                location: "El Último Enfrentamiento",
                text: "El conejo reveló su verdadera forma: un coleccionista de almas antiguo y retorcido. Pero Juno y los niños liberados lo rodearon, cada uno sosteniendo un fragmento de sus propias prisiones. 'Los monstruos solo tienen poder si les tenemos miedo', declaró Juno. Unidos, enfrentaron la oscuridad con la luz de su valentía.",
                choices: {
                    banish_forever: "Desterrar al conejo para siempre",
                    redeem_rabbit: "Intentar redimir al conejo",
                    ultimate_sacrifice: "Realizar el sacrificio final"
                }
            },
            banish_forever: {
                location: "El Destierro",
                text: "Usando los fragmentos de porcelana y los hilos rotos, Juno y los niños tejieron una red de luz y esperanza. El conejo, atrapado en su propia trampa, fue empujado hacia un abismo entre realidades. Su reino de pesadillas se cerró para siempre, sellado por la fuerza combinada de quienes una vez fueron sus víctimas.",
                choices: {
                    victory_ending: "Celebrar la victoria"
                }
            },
            victory_ending: {
                location: "El Amanecer de la Esperanza",
                text: "El jardín se transformó bajo la luz del amanecer. Donde antes había horror, ahora florecían flores reales. Los niños, libres de sus prisiones de porcelana, rieron y jugaron mientras el último rastro del conejo se desvanecía. Juno los observaba, sabiendo que algunas batallas valen la pena ser luchadas. En su bolsillo, guardó un último botón, no como trofeo, sino como recordatorio de que la oscuridad siempre puede ser vencida por la luz de la valentía colectiva.",
                choices: {
                    restart: "Comenzar una nueva investigación"
                }
            },
            redeem_rabbit: {
                location: "La Redención",
                text: "En medio de la batalla, Juno vio algo en los ojos de botón del conejo: un destello de soledad antigua y dolor. '¿Por qué coleccionas niños?', preguntó. El conejo vaciló, y por un momento, su forma cambió, revelando a un niño perdido hace mucho tiempo. 'Solo quería amigos que nunca me abandonaran', susurró con una voz que ya no era amenazante, sino triste.",
                choices: {
                    offer_friendship: "Ofrecer verdadera amistad",
                    show_consequences: "Mostrar el dolor causado",
                    forgive: "Perdonar y sanar"
                }
            },
            offer_friendship: {
                location: "El Poder del Perdón",
                text: "Juno extendió su mano hacia el niño que fue el conejo. 'La verdadera amistad no se puede forzar ni coser', dijo suavemente. 'Debe crecer naturalmente, como las flores en este jardín'. Los niños liberados, viendo la verdad, formaron un círculo alrededor del conejo transformado. Esta vez, la fiesta de té era real, con risas genuinas y sin hilos ni botones.",
                choices: {
                    redemption_ending: "Aceptar la redención"
                }
            },
            redemption_ending: {
                location: "El Jardín Sanado",
                text: "El jardín de pesadillas se transformó en un lugar de sanación. El conejo, ahora un niño normal, aprendió a hacer amigos sin necesidad de hilos ni agujas. Las muñecas se convirtieron en niños reales, y el jardín se llenó de juegos y risas verdaderas. Juno comprendió que a veces, el verdadero valor está en ver más allá del monstruo, hasta encontrar el corazón herido que necesita sanar.",
                choices: {
                    restart: "Comenzar una nueva investigación"
                }
            },
            ultimate_sacrifice: {
                location: "El Precio del Amor",
                text: "Juno comprendió que la única forma de salvar a todos era ofrecer algo que el conejo nunca había tenido: amor incondicional. Abrazó al monstruo, aceptando sus agujas y dolor. 'No estás solo', susurró. 'Nunca más lo estarás'. Su sacrificio de amor puro comenzó a transformar tanto al conejo como al jardín mismo.",
                choices: {
                    transformation_ending: "Aceptar la transformación final"
                }
            },
            transformation_ending: {
                location: "El Jardín del Amor",
                text: "El sacrificio de Juno transformó el jardín en un santuario. Ella se convirtió en su guardiana, no como una muñeca, sino como un espíritu de amor y protección. Los niños fueron liberados, y el conejo encontró paz como su compañero guardián. Juntos, transformaron el lugar de pesadillas en un refugio para niños perdidos, donde el amor verdadero sana todas las heridas.",
                choices: {
                    restart: "Comenzar una nueva investigación"
                }
            },
            protect_weak: {
                location: "El Escudo de los Inocentes",
                text: "Mientras algunos niños luchaban, Juno se concentró en proteger a los más pequeños y asustados. Formó un círculo con ellos, usando su propio cuerpo como escudo. El conejo, al ver este acto de amor protector, comenzó a recordar su propia infancia perdida, cuando él también necesitó protección y nadie estuvo allí.",
                choices: {
                    shield_ending: "Mantener el escudo protector",
                    inspire_others: "Inspirar a otros a proteger",
                    face_darkness: "Enfrentar la oscuridad juntos"
                }
            },
            shield_ending: {
                location: "La Protectora Eterna",
                text: "El amor protector de Juno creó un escudo de luz dorada que ninguna oscuridad podía penetrar. Los niños, seguros en su abrazo, encontraron la fuerza para liberarse. El conejo, enfrentado al poder del amor maternal que nunca conoció, se transformó en un guardián más, jurando proteger en lugar de dañar. El jardín se convirtió en un santuario donde los niños perdidos siempre encontrarían protección.",
                choices: {
                    restart: "Comenzar una nueva investigación"
                }
            }
        };

        // Función para mostrar la pantalla de Game Over
        function showGameOver() {
            gameAudio.gameMusic.pause();
            gameAudio.gameOverMusic.play();
            
            const container = document.getElementById('story-container');
            container.style.opacity = '0';
            
            setTimeout(() => {
                updateScene('game_over');
                container.style.opacity = '1';
                
                // Agregar efecto visual de Game Over
                const gameOverEffect = document.createElement('div');
                gameOverEffect.className = 'game-over-effect';
                container.appendChild(gameOverEffect);
            }, 500);
        }

        // Función para mostrar el final bueno
        function showGoodEnding() {
            gameAudio.gameMusic.pause();
            gameAudio.goodEndingMusic.play();
            updateScene('good_ending');
        }

        // Función para mostrar el final alternativo
        function showAlternativeEnding() {
            gameAudio.gameMusic.pause();
            gameAudio.badEndingMusic.play();
            updateScene('become_nightmare');
        }

        // Función typeWriter mejorada con sonido
        function typeWriter(element, text, speed = 30) {
            let i = 0;
            element.textContent = '';
            
            function type() {
                if (i < text.length) {
                    element.textContent += text.charAt(i);
                    if (text.charAt(i) !== ' ') {
                        gameAudio.typewriterSound.currentTime = 0;
                        gameAudio.typewriterSound.play();
                    }
                    i++;
                    setTimeout(type, speed);
                }
            }
            type();
        }

        // Actualizar la función updateScene para incluir los nuevos efectos de sonido
        function updateScene(scene) {
            if (!storyData[scene]) return;
            
            const container = document.getElementById('story-container');
            const locationName = document.querySelector('.location-name');
            const storyText = document.getElementById('story-text');
            const choicesContainer = document.getElementById('choices-container');
            
            gameAudio.pageChange.play();
            container.style.opacity = '0';
            
            setTimeout(() => {
                locationName.textContent = storyData[scene].location;
                typeWriter(storyText, storyData[scene].text);
                
                choicesContainer.innerHTML = '';
                Object.entries(storyData[scene].choices).forEach(([key, text], index) => {
                    setTimeout(() => {
                        const button = document.createElement('button');
                        button.className = 'choice-btn';
                        button.style.animationDelay = `${index * 0.2}s`;
                        button.innerHTML = `<span class="choice-prefix">> </span>${text}`;
                        button.dataset.choice = key;
                        button.onclick = () => {
                            gameAudio.buttonClick.play();
                            if (key === 'game_over') {
                                showGameOver();
                            } else if (key === 'good_ending') {
                                showGoodEnding();
                            } else if (key === 'become_nightmare') {
                                showAlternativeEnding();
                            } else {
                                updateScene(key);
                            }
                        };
                        choicesContainer.appendChild(button);
                    }, index * 300);
                });
                
                container.style.opacity = '1';
            }, 500);
        }

        // Inicializar el juego con música
        document.addEventListener('DOMContentLoaded', () => {
            const startButton = document.querySelector('.start-game');
            const creditsButton = document.querySelector('.show-credits');
            const gameMenu = document.getElementById('game-menu');
            const gameContainer = document.getElementById('game-container');
            
            // Función para iniciar el juego
            function startGame() {
                gameAudio.menuMusic.pause();
                gameAudio.gameMusic.currentTime = 0;
                gameAudio.gameMusic.play();
                
                gameMenu.style.display = 'none';
                gameContainer.style.display = 'block';
                
                setTimeout(() => {
                    gameContainer.classList.add('active');
                    updateScene('start');
                }, 100);
            }

            // Función para mostrar los créditos
            function showCredits() {
                const creditsText = `
                    <h2>Créditos</h2>
                    <p>Where are the Alices?</p>
                    <p>Un Juego de Terror Psicológico</p>
                    <p>Creado por ZimmZimmGames</p>
                    <br>
                    <button class="menu-btn back-to-menu">Volver al Menú</button>
                `;
                gameMenu.innerHTML = creditsText;
                
                document.querySelector('.back-to-menu').addEventListener('click', () => {
                    location.reload();
                });
            }

            // Función mejorada para escribir texto
            function typeWriter(element, text, speed = 30) {
                return new Promise((resolve) => {
                    let i = 0;
                    element.textContent = '';
                    
                    function type() {
                        if (i < text.length) {
                            element.textContent += text.charAt(i);
                            if (text.charAt(i) !== ' ') {
                                gameAudio.typewriterSound.currentTime = 0;
                                gameAudio.typewriterSound.play();
                            }
                            i++;
                            setTimeout(type, speed);
                        } else {
                            resolve();
                        }
                    }
                    type();
                });
            }

            // Función mejorada para actualizar la escena
            async function updateScene(scene) {
                if (!storyData[scene]) return;
                
                const container = document.getElementById('story-container');
                const locationName = document.querySelector('.location-name');
                const storyText = document.getElementById('story-text');
                const choicesContainer = document.getElementById('choices-container');
                
                gameAudio.pageChange.play();
                container.style.opacity = '0';
                
                await new Promise(resolve => setTimeout(resolve, 500));
                
                locationName.textContent = storyData[scene].location;
                choicesContainer.innerHTML = '';
                container.style.opacity = '1';
                
                await typeWriter(storyText, storyData[scene].text);
                
                Object.entries(storyData[scene].choices).forEach(([key, text], index) => {
                    setTimeout(() => {
                        const button = document.createElement('button');
                        button.className = 'choice-btn';
                        button.style.animationDelay = `${index * 0.2}s`;
                        button.innerHTML = `<span class="choice-prefix">> </span>${text}`;
                        
                        button.onclick = () => {
                            gameAudio.buttonClick.play();
                            
                            switch(key) {
                                case 'game_over':
                                    showGameOver();
                                    break;
                                case 'good_ending':
                                    showGoodEnding();
                                    break;
                                case 'become_nightmare':
                                    showAlternativeEnding();
                                    break;
                                case 'restart':
                                    location.reload();
                                    break;
                                default:
                                    updateScene(key);
                            }
                        };
                        
                        choicesContainer.appendChild(button);
                    }, index * 300);
                });
            }

            // Función mejorada para mostrar el Game Over
            function showGameOver() {
                gameAudio.gameMusic.pause();
                gameAudio.gameOverMusic.currentTime = 0;
                gameAudio.gameOverMusic.play();
                
                const container = document.getElementById('story-container');
                container.style.opacity = '0';
                
                setTimeout(() => {
                    updateScene('game_over');
                    container.style.opacity = '1';
                    
                    const gameOverEffect = document.createElement('div');
                    gameOverEffect.className = 'game-over-effect';
                    container.appendChild(gameOverEffect);
                }, 500);
            }

            // Función mejorada para mostrar el final bueno
            function showGoodEnding() {
                gameAudio.gameMusic.pause();
                gameAudio.goodEndingMusic.currentTime = 0;
                gameAudio.goodEndingMusic.play();
                updateScene('good_ending');
            }

            // Función mejorada para mostrar el final alternativo
            function showAlternativeEnding() {
                gameAudio.gameMusic.pause();
                gameAudio.badEndingMusic.currentTime = 0;
                gameAudio.badEndingMusic.play();
                updateScene('become_nightmare');
            }

            // Event Listeners
            startButton.addEventListener('click', startGame);
            creditsButton.addEventListener('click', showCredits);
            
            // Reproducir música del menú al cargar
            gameAudio.menuMusic.play();
        });

        // Agregar estilos para la pantalla de Game Over
        const style = document.createElement('style');
        style.textContent = `
            .game-over-effect {
                position: fixed;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                background: rgba(139, 0, 0, 0.3);
                pointer-events: none;
                animation: pulse 2s infinite;
            }

            @keyframes pulse {
                0% { background: rgba(139, 0, 0, 0.3); }
                50% { background: rgba(139, 0, 0, 0.5); }
                100% { background: rgba(139, 0, 0, 0.3); }
            }

            .choice-btn {
                /* Existing styles */
                transition: all 0.3s ease, text-shadow 0.3s ease;
            }

            .choice-btn:hover {
                /* Existing styles */
                text-shadow: 0 0 10px var(--gold);
            }

            .location-name {
                /* Existing styles */
                animation: textGlow 2s infinite;
            }

            @keyframes textGlow {
                0% { text-shadow: 0 0 5px var(--gold); }
                50% { text-shadow: 0 0 15px var(--gold), 0 0 25px var(--dark-gold); }
                100% { text-shadow: 0 0 5px var(--gold); }
            }
        `;
        document.head.appendChild(style);

        const translations = {
            en: {
                about: "ABOUT",
                demo: "DEMO",
                merch: "MERCH",
                faq: "FAQ / CONTACT",
                startGame: "Start Game",
                continue: "Continue",
                credits: "Credits",
                downloadDemo: "Download Demo",
                joinDiscord: "Join Discord",
                comingSoon: "Coming Soon",
                demoAvailable: "Demo available soon",
                supportTitle: "Support Development",
                supportSubtitle: "Help us bring more nightmares to reality",
                dareToEnter: "Dare to Enter?",
                dareText: "Enter a world where nightmares come to life and dolls hold dark secrets. Discover what really happened to the Alices... if you dare.",
                startNightmare: "Begin the Nightmare",
                tryDemo: "Try the Demo",
                exploreChapter: "Explore the first chapter of Where are the Alices?",
                rabbitHoleTitle: "Enter the Rabbit Hole",
                rabbitHoleSubtitle: "Talk to nightmares made real",
                communityTitle: "Join the Community",
                communitySubtitle: "Share your theories and uncover secrets with other investigators",
                discordTitle: "Official Discord Server",
                discordText: "Join our detective community and share your findings about the disappearances. Can you solve the mystery before it's too late?",
                copyright: "© 2024 ZimmZimmGames. All rights reserved."
            },
            es: {
                about: "SOBRE",
                demo: "DEMO",
                merch: "TIENDA",
                faq: "FAQ / CONTACTO",
                startGame: "Iniciar Juego",
                continue: "Continuar",
                credits: "Créditos",
                downloadDemo: "Descargar Demo",
                joinDiscord: "Unirse a Discord",
                comingSoon: "Próximamente",
                demoAvailable: "Demo disponible próximamente",
                supportTitle: "Apoya el Desarrollo",
                supportSubtitle: "Ayúdanos a traer más pesadillas a la realidad",
                dareToEnter: "¿Te Atreves a Entrar?",
                dareText: "Adéntrate en un mundo donde las pesadillas cobran vida y las muñecas guardan secretos oscuros. Descubre qué les sucedió realmente a las Alices... si te atreves.",
                startNightmare: "Comenzar la Pesadilla",
                tryDemo: "Prueba la Demo",
                exploreChapter: "¡Explora el primer capítulo de Where are the Alices?",
                rabbitHoleTitle: "Adéntrate en la Madriguera del Conejo",
                rabbitHoleSubtitle: "Habla con las pesadillas hechas realidad",
                communityTitle: "Únete a la Comunidad",
                communitySubtitle: "Comparte tus teorías y descubre los secretos con otros investigadores",
                discordTitle: "Servidor Oficial de Discord",
                discordText: "Únete a nuestra comunidad de detectives y comparte tus descubrimientos sobre las desapariciones. ¿Podrás resolver el misterio antes de que sea demasiado tarde?",
                copyright: "© 2024 ZimmZimmGames. Todos los derechos reservados."
            },
            ja: {
                about: "概要",
                demo: "デモ",
                merch: "ショップ",
                faq: "FAQ / お問い合わせ",
                startGame: "ゲームを始める",
                continue: "続ける",
                credits: "クレジット",
                downloadDemo: "デモをダウンロード",
                joinDiscord: "Discordに参加",
                comingSoon: "近日公開",
                demoAvailable: "デモ版は近日公開予定",
                supportTitle: "開発をサポート",
                supportSubtitle: "より多くの悪夢を現実にするためにご協力ください",
                dareToEnter: "入る勇気はありますか？",
                dareText: "悪夢が現実となり、人形が暗い秘密を守る世界へ。アリスたちの真実を明らかにしましょう...もし勇気があれば。",
                startNightmare: "悪夢を始める",
                tryDemo: "デモを試す",
                exploreChapter: "「Where are the Alices?」の第一章を体験しよう",
                rabbitHoleTitle: "ウサギの穴へ潜入",
                rabbitHoleSubtitle: "現実となった悪夢と会話する",
                communityTitle: "コミュニティに参加",
                communitySubtitle: "他の探偵たちと理論を共有し、秘密を解き明かそう",
                discordTitle: "公式Discordサーバー",
                discordText: "探偵コミュニティに参加して、失踪事件についての発見を共有しましょう。時間切れになる前に謎を解けますか？",
                copyright: "© 2024 ZimmZimmGames. 全ての権利を保有"
            },
            ru: {
                about: "О ИГРЕ",
                demo: "ДЕМО",
                merch: "МАГАЗИН",
                faq: "FAQ / КОНТАКТЫ",
                startGame: "Начать игру",
                continue: "Продолжить",
                credits: "Титры",
                downloadDemo: "Скачать демо",
                joinDiscord: "Присоединиться к Discord",
                comingSoon: "Скоро",
                demoAvailable: "Демо версия скоро будет доступна",
                supportTitle: "Поддержать разработку",
                supportSubtitle: "Помогите нам воплотить больше кошмаров в реальность",
                dareToEnter: "Осмелишься войти?",
                dareText: "Войдите в мир, где кошмары оживают, а куклы хранят темные секреты. Узнайте, что на самом деле случилось с Алисами... если осмелитесь.",
                startNightmare: "Начать кошмар",
                tryDemo: "Попробовать демо",
                exploreChapter: "Исследуйте первую главу Where are the Alices?",
                rabbitHoleTitle: "Спуститься в Кроличью Нору",
                rabbitHoleSubtitle: "Поговорите с кошмарами, ставшими реальностью",
                communityTitle: "Присоединиться к сообществу",
                communitySubtitle: "Делитесь теориями и раскрывайте секреты вместе с другими исследователями",
                discordTitle: "Официальный Discord сервер",
                discordText: "Присоединяйтесь к нашему сообществу детективов и делитесь своими находками о исчезновениях. Сможете ли вы разгадать тайну до того, как станет слишком поздно?",
                copyright: "© 2024 ZimmZimmGames. Все права защищены."
            }
        };

        // Función para cambiar el idioma
        function changeLanguage(lang) {
            document.documentElement.setAttribute('lang', lang);
            
            // Actualizar todos los elementos traducibles
            document.querySelectorAll('[data-translate]').forEach(element => {
                const key = element.getAttribute('data-translate');
                if (translations[lang][key]) {
                    if (element.tagName.toLowerCase() === 'input' || 
                        element.tagName.toLowerCase() === 'textarea') {
                        element.placeholder = translations[lang][key];
                    } else {
                        element.textContent = translations[lang][key];
                    }
                }
            });

            // Actualizar el botón de idioma actual
            const currentBtn = document.querySelector('.language-btn.current');
            currentBtn.classList.remove('current');
            currentBtn.textContent = lang.toUpperCase();
            
            document.querySelector(`[data-lang="${lang}"]`).classList.add('current');
            localStorage.setItem('preferredLanguage', lang);
        }

        // Inicializar el sistema de idiomas
        document.addEventListener('DOMContentLoaded', () => {
            // Agregar atributos data-translate a los elementos que necesitan traducción
            document.querySelectorAll('.menu-items a').forEach((item, index) => {
                const keys = ['about', 'demo', 'merch', 'faq'];
                item.setAttribute('data-translate', keys[index]);
            });

            // Elementos de la página principal
            document.querySelector('.coming-soon').setAttribute('data-translate', 'comingSoon');
            document.querySelector('.demo-available span').setAttribute('data-translate', 'demoAvailable');
            document.querySelector('.cta-container h2').setAttribute('data-translate', 'dareToEnter');
            document.querySelector('.cta-text').setAttribute('data-translate', 'dareText');
            document.querySelector('.cta-btn .btn-text').setAttribute('data-translate', 'startNightmare');
            
            // Sección de soporte
            document.querySelector('.support-section h2').setAttribute('data-translate', 'supportTitle');
            document.querySelector('.support-section .subtitle').setAttribute('data-translate', 'supportSubtitle');
            
            // Sección de demo
            document.querySelector('.demo-section h2').setAttribute('data-translate', 'tryDemo');
            document.querySelector('.demo-content p').setAttribute('data-translate', 'exploreChapter');
            
            // Sección de la madriguera del conejo
            document.querySelector('.rabbit-hole-section h2').setAttribute('data-translate', 'rabbitHoleTitle');
            document.querySelector('.rabbit-hole-section .subtitle').setAttribute('data-translate', 'rabbitHoleSubtitle');
            
            // Sección de Discord
            document.querySelector('.discord-section h2').setAttribute('data-translate', 'communityTitle');
            document.querySelector('.discord-section .subtitle').setAttribute('data-translate', 'communitySubtitle');
            document.querySelector('.discord-card h3').setAttribute('data-translate', 'discordTitle');
            document.querySelector('.discord-card p').setAttribute('data-translate', 'discordText');
            
            // Footer
            document.querySelector('.footer p').setAttribute('data-translate', 'copyright');

            // Inicializar el idioma
            const preferredLanguage = localStorage.getItem('preferredLanguage') || 'es';
            changeLanguage(preferredLanguage);
        });
    </script>
</body>
</html>

